<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Streamlab - Video Streaming HTML5 Template" />
    <meta name="description" content="Streamlab - Video Streaming HTML5 Template" />
    <meta name="author" content="StreamLab" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Streamlab - Video Streaming HTML5 Template</title>
    <!-- Favicon -->
    <link rel="shortcut icon" href="images/favicon.png">
    <!-- CSS bootstrap-->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <!--  Style -->
    <link rel="stylesheet" href="css/style.css" />
    <!--  Responsive -->
    <link rel="stylesheet" href="css/responsive.css" />
</head>

<body>

	<!-- wishList Toast start -->
	<div id="wish" th:insert="include_common::wish"></div>
	<!-- wishList Toast end -->

    <!--=========== Loader =============-->
    <div id="gen-loading">
        <div id="gen-loading-center">
            <img src="images/logo-1.png" alt="loading">
        </div>
    </div>
    <!--=========== Loader =============-->

    <!--========== Header ==============-->
    <div id="header" th:insert="include_common::top"></div>
    <!--========== Header ==============-->

    <!-- Single movie Start -->
    <section class="gen-section-padding-3 gen-single-movie">
        <div class="container">
            <div class="row no-gutters">
                <div class="col-lg-12">
                    <div class="gen-single-movie-wrapper style-1">
                        <div class="row">
                            <div class="col-lg-12">
                                <div th:if="${isExistence}" class="gen-video-holder">
                                    <iframe width="100%" height="550px" th:src="${movieDetailMap.movie.movieDetail.md_film}"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <div th:if="${!isExistence}" class="gen-video-holder">
                                    <iframe width="100%" height="550px" th:src="${movieDetailMap.movie.movieDetail.md_subfilm}"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <div class="gen-single-movie-info">
                                    <h2 th:text="${movieDetailMap.movie.movie_title}" class="gen-title">My Generation</h2>
                                    <div class="gen-single-meta-holder">
                                        <ul>
                                            <li>
                                                <i class="fas fa-eye">
                                                </i>
                                                <span th:text="${movieDetailMap.movie.movie_count}+' Views'">237</span>
                                            </li>
                                        </ul>
                                    </div>
                                    <p th:text="${movieDetailMap.movie.movieDetail.md_summary}">Streamlab is a long established fact that a reader will be distracted by the
                                        readable
                                        content of a page when Streamlab at its layout. The point of using Lorem
                                        Streamlab
                                        is that it has a more-or-less normal distribution of Streamlab as opposed
                                        Streamlab.
                                    </p>
                                    <div class="gen-after-excerpt">
                                        <div class="gen-extra-data">
                                            <ul>
                                                <li>
                                                    <span>감독 :</span>
                                                    <span th:text="${movieDetailMap.movie.movieDetail.md_director}">English</span>
                                                </li>
                                                <li>
                                                    <span>출연진 :</span>
                                                    <span th:text="${movieDetailMap.movie.movieDetail.md_actors}">English</span>
                                                </li>
                                                <li><span>관람연령 :</span>
                                                    <span th:text="${movieDetailMap.movie.movie_rating}">1hr 24 mins</span>
                                                </li>
                                                <li><span>장르 :</span>
                                                    <span th:each="genre:${movieDetailMap.genreList}">
                                                        <a th:text="${genre.genre_name}" href="movie_main">
                                                            Action, </a>
                                                        &nbsp;
                                                    </span>
                                                </li>
                                                <li><span>상영시간 :</span>
                                                    <span th:text="${movieDetailMap.movie.movie_runtime}">1hr 24 mins</span>
                                                </li>
                                                <li>
                                                    <span>상영일 :</span>
                                                    <span th:text="${#dates.format(movieDetailMap.movie.movie_opendate, 'yyyy-MM-dd')}">14 Aug,2018</span>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="gen-socail-share">
                                            <h4 class="align-self-center">공유 :</h4>
                                            <ul class="social-inner">
                                                <li><a href="#" class="facebook"><i class="fab fa-facebook-f"></i></a>
                                                </li>
                                                <li><a href="#" class="facebook"><i class="fab fa-instagram"></i></a>
                                                </li>
                                                <li><a href="#" class="facebook"><i class="fab fa-twitter"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="pm-inner">
                                    <div class="gen-more-like">
                                        <h5 class="gen-more-title">비슷한 영화</h5>
                                        <div class="row">
                                            <div th:each = "genreMovie:${sameGenreMovieList}" class="col-xl-3 col-lg-4 col-md-6">
                                                <div class="gen-carousel-movies-style-3 movie-grid style-3">
                                                    <div class="gen-movie-contain">
                                                        <div class="gen-movie-img">
                                                            <img th:src="@{/img/movie/}+${genreMovie.movie_img}"
                                                                alt="streamlab-image"
                                                                height="1080" width="1920">
                                                            <div class="gen-movie-add">
                                                            <!-- wishlist click -->
                                                                <div class="wpulike wpulike-heart ">
					                                                <div class="wp_ulike_general_class">
					                                                    <a th:href="'javascript:insertDeleteWishList('+${genreMovie.movie_no}+');'" 
					                                                    class="sl-button"
														              	th:id="'movieWish'+${genreMovie.movie_no}">
														              	<th:block th:if="${genreMovie.userList}!=null">
						                                                    <i th:if="${movie.userList.size()}==0" class="far fa-heart" style="color:white"></i>
						                                                    <i th:unless="${genreMovie.userList.size()}==0" class="fas fa-heart" style="color:red"></i>
					                                                    </th:block>
					                                                    <th:block th:unless="${genreMovie.userList}!=null">
					                                                    	<i class="far fa-heart" style="color:white"></i>
					                                                    </th:block>
					                                                    </a>
					                                                </div>
					                                            </div>
					                                            <!-- wishlist click -->
                                                                <ul class="menu bottomRight">
                                                                    <li class="share top">
                                                                        <i class="fa fa-share-alt"></i>
                                                                        <ul class="submenu">
                                                                            <li><a href="#" class="facebook"><i
                                                                                        class="fab fa-facebook-f"></i></a>
                                                                            </li>
                                                                            <li><a href="#" class="facebook"><i
                                                                                        class="fab fa-instagram"></i></a>
                                                                            </li>
                                                                            <li><a href="#" class="facebook"><i
                                                                                        class="fab fa-twitter"></i></a>
                                                                            </li>
                                                                        </ul>
                                                                    </li>
                                                                </ul>
                                                                <div
                                                                    class="movie-actions--link_add-to-playlist dropdown">
                                                                    <a class="dropdown-toggle" href="#"
                                                                        data-toggle="dropdown"><i
                                                                            class="fa fa-plus"></i></a>
                                                                    <div class="dropdown-menu mCustomScrollbar">
                                                                        <div class="mCustomScrollBox">
                                                                            <div class="mCSB_container">
                                                                                <a class="login-link" href="#">Sign in
                                                                                    to add this movie to
                                                                                    a
                                                                                    playlist.</a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="gen-movie-action">
                                                                <a th:href="@{movie_detail?movie_no=}+${genreMovie.movie_no}" class="gen-button">
                                                                    <i class="fa fa-play"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="gen-info-contain">
                                                            <div class="gen-movie-info">
                                                                <h3 th:text="${genreMovie.movie_title}"><a href="movies-home.html">The warrior life</a></h3>
                                                            </div>
                                                            <div class="gen-movie-meta-holder">
                                                                <ul>
                                                                    <li th:text="${genreMovie.movie_runtime}">2hr 00mins</li>
                                                                    
                                                                    <li>
                                                                        <!--  <a th:text="${genreName}" ><span>장르</span></a>-->
					                                                        <a th:text="${movieDetailMap.genreName}">Action, </a>
                                                                    </li>
                                                                    
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                      </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="gen-load-more-button">
                                                    <div class="gen-btn-container">
                                                    <!-- 
                                                        <a class="gen-button gen-button-loadmore" href="#">
                                                            <span class="button-text">Load More</span>
                                                            <span class="loadmore-icon" style="display: none;"><i
                                                                    class="fa fa-spinner fa-spin"></i></span>
                                                        </a>
                                                     -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Single movie End -->

    <!-- footer start -->
    <div id="footer" th:insert="include_common::bottom"></div>
    <!-- footer End -->

    <!-- Back-to-Top start -->
    <div id="back-to-top">
        <a class="top" id="top" href="#top"> <i class="ion-ios-arrow-up"></i> </a>
    </div>
    <!-- Back-to-Top end -->

    <!-- js-min -->
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/asyncloader.min.js"></script>
    <!-- JS bootstrap -->
    <script src="js/bootstrap.min.js"></script>
    <!-- owl-carousel -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- counter-js -->
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <!-- popper-js -->
    <script src="js/popper.min.js"></script>
    <script src="js/swiper-bundle.min.js"></script>
    <!-- Iscotop -->
    <script src="js/isotope.pkgd.min.js"></script>

    <script src="js/jquery.magnific-popup.min.js"></script>

    <script src="js/slick.min.js"></script>

    <script src="js/streamlab-core.js"></script>

    <script src="js/script.js"></script>
    
    <script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
		var insertDeleteWishList = function(movie_no) {
			var targetId = 'movieWish'+movie_no;
			$.ajax({
				url:'wishList',
				data:'movie_no='+movie_no,
				method:'GET',
				dataType:'text',
				success:function(result) {
					if(result=="success"){
						$("a[id='"+targetId+"'] i").attr('class','fas fa-heart');
						$("a[id='"+targetId+"'] i").attr('style','color:red');
				    	$('#wishListToast').on('show.bs.toast',function(e){
				    		$(e.target).find('.toast-body').html('위시리스트에 등록되었습니다.');
				    	});
				    	
					}else{
						$("a[id='"+targetId+"'] i").attr('class','far fa-heart');
						$("a[id='"+targetId+"'] i").attr('style','color:white');
				    	$('#wishListToast').on('show.bs.toast',function(e){
				    		$(e.target).find('.toast-body').html('위시리스트에 삭제되었습니다.');
				    	});
				    	window.location.reload();
					}
					$('#wishListToast').toast('show');
				}
			});
		}
	/*]]>*/
	</script>
    


</body>

</html>